webpackJsonp([103],{"5m6F":function(t,s){},jmpT:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("Gu7T"),i=a.n(e),l=a("ruAw"),c=a("qwAB"),n=a("y/jF"),r=(a("JxNM"),a("hsJS"),a("/kga")),o=a("4Zr1"),d=(n.a,c.a,r.a,o.default,{data:function(){return{list:[],data:"",loadflag:!1,pageNum:1,pageSize:1,listenScroll:!0,totalCount:0,type:0,wlType:0}},created:function(){this._buyersOrderListdo()},computed:{loading:function(){return this.$store.state.zj.updatedloading}},methods:{scroll:function(t){if(this.scrollY=t.y,console.log(this.scrollY),this.scrollY<-100){if(this.loadflag=!0,this.list.length>=this.totalCount)return void(this.loadflag=!1);this.pageNum++,this._buyersOrderListdo()}this.scrollY>Math.abs(-100)&&(this.pageNum=1,this.list=[],this._buyersOrderListdo())},_buyersOrderListdo:function(){var t=this;Object(l.A)({pageNum:this.pageNum,type:0,currentType:0,pageSize:2}).then(function(s){if(1==s.code){var a;if(s.data.list.length<=0)return void t.$vux.toast.text("暂无数据","middle");t.loadflag=!1,(a=t.list).push.apply(a,i()(s.data.list)),t.totalCount=s.data.total,t.$nextTick(function(){for(var s=0;s<t.list.length;s++){switch(parseInt(t.list[s].status)){case 0:t.$set(t.list[s],"statusText","待确认");break;case 1:t.$set(t.list[s],"statusText","待付款");break;case 2:t.$set(t.list[s],"statusText","待补款");break;case 5:t.$set(t.list[s],"statusText","已完成");break;case 6:t.$set(t.list[s],"statusText","待评价")}t._buyersOrderDetailsdo(t.list[s].id,s)}})}}).catch(function(t){})},_buyersOrderDetailsdo:function(t,s){var a=this;Object(l.z)({orderId:t}).then(function(t){1==t.code&&(a.data=t.data,a.$nextTick(function(){a.$set(a.list[s],"data",a.data),console.log(a.list[s]),console.log(a.list[s].data[0].quantity);var t=a.list[s].data[0].quantity-a.list[s].data[0].deliver_qty;3==a.list[s].status&&2==a.list[s].pay_type&&0==t?(a.$set(a.list[s],"statusText","待收货"),a.$set(a.list[s],"wlType",1)):3==a.list[s].status&&2==a.list[s].pay_type&&t>0&&(a.$set(a.list[s],"statusText","待发货"),a.$set(a.list[s],"wlType",0))}))}).catch(function(t){})},checkPay:function(t){this._alipayPaydo(t)},_alipayPaydo:function(t){var s=this;Object(l.k)({orderId:t}).then(function(t){s.$router.replace({path:"/pay",query:{href:t}})}).catch(function(t){})},cancelOrder:function(t){this._deleteOrderdo(t)},_deleteOrderdo:function(t){var s=this;Object(l.E)({orderId:t}).then(function(t){1==t.code&&(s.text=t.msg,s.msgshow=!0,s._buyersOrderListdo())}).catch(function(t){})},remindFh:function(t){this._appremainSendGoodsdo(t)},_appremainSendGoodsdo:function(t){var s=this;Object(l.l)({orderId:t}).then(function(t){1==t.code&&s.$vux.toast.text("已提醒卖家发货","middle")}).catch(function(t){})}},components:{Loading:n.a,Scroll:c.a,XDialog:r.a,commitCompany:o.default}}),_={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"qb"},[a("scroll",{ref:"scroll",staticClass:"nominate-content",attrs:{data:t.list,"listen-scroll":t.listenScroll},on:{scroll:t.scroll}},[a("div",{staticClass:"box-list"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loadflag,expression:"loadflag"}],staticClass:"loadmore"},[a("loading")],1),t._v(" "),t._l(t.list,function(s){return a("div",{staticClass:"bgf mb20"},[a("router-link",{attrs:{to:{path:"/orderdetailDqr",query:{orderId:s.id}}}},[a("p",{staticClass:"clr lh80 bdb pl3 pr3"},[a("span",{staticClass:"c0 fs30"},[t._v(t._s(s.company_name))]),t._v(" "),a("i",{staticClass:"iconfont icon-right fs26 c6"}),t._v(" "),a("span",{staticClass:"clblue right fs28"},[t._v(t._s(s.statusText))])]),t._v(" "),t._l(s.data,function(e){return a("div",[a("div",{staticClass:"pl3 pr3 bdb"},[a("div",{staticClass:"flex flex-align-center fs28"},[a("p",{staticClass:"flex-1 lh80"},[a("span",{staticClass:"c6"},[t._v("型号")]),t._v(" "),a("span",{staticClass:"c0 ml20"},[t._v(t._s(e.model_code))])]),t._v(" "),a("span",{staticClass:"clred"},[t._v("¥ "+t._s(e.unit_price/100))])]),t._v(" "),a("div",{staticClass:"flex flex-align-center fs28"},[a("p",{staticClass:"flex-1 lh80"},[a("span",{staticClass:"c6"},[t._v("品牌")]),t._v(" "),a("span",{staticClass:"c0 ml20"},[t._v(t._s(e.brand_code))])]),t._v(" "),a("div",[a("p",{staticClass:"c9"},[t._v("单价 ¥ "+t._s(e.unit_price/100))]),t._v(" "),a("p",{staticClass:"c9"},[t._v("数量 "+t._s(e.quantity))])])]),t._v(" "),a("div",{staticClass:"flex flex-align-center fs28"},[a("p",{staticClass:"flex-1 lh80"},[a("span",{staticClass:"c6"},[t._v("批号")]),t._v(" "),a("span",{staticClass:"c0 ml20"},[t._v(t._s(s.batch_code))])])]),t._v(" "),a("div",{staticClass:"flex flex-align-center fs28"},[a("p",{staticClass:"flex-1 lh80"},[a("span",{staticClass:"c6"},[t._v("封装")]),t._v(" "),a("span",{staticClass:"c0 ml20"},[t._v(t._s(e.encapsulation))])]),t._v(" "),0!=s.status?a("div",[a("p",[a("span",[t._v("\n                    已发货\n                    "),a("em",{staticClass:"clred ml10"},[t._v(t._s(e.deliver_qty))])]),t._v(" "),a("span",{staticClass:"ml10"},[t._v("\n                    未发货\n                    "),a("em",{staticClass:"clred ml10"},[t._v(t._s(e.quantity-e.deliver_qty))])])]),t._v(" "),a("p",[a("span",[t._v("\n                    已收货\n                    "),a("em",{staticClass:"clred ml10"},[t._v(t._s(e.receipt_qty))])]),t._v(" "),a("span",{staticClass:"ml10"},[t._v("\n                    未收货\n                    "),a("em",{staticClass:"clred ml10"},[t._v(t._s(e.quantity-e.receipt_qty))])])])]):t._e()])])])})],2),t._v(" "),a("div",{staticClass:" pl3 pr3 lh60 clr bdb"},[a("div",{staticClass:"flex flex-justify-space"},[0==s.pay_type?a("span",[t._v("第三方担保")]):t._e(),t._v(" "),1==s.pay_type?a("span",[t._v("账期付款")]):t._e(),t._v(" "),2==s.pay_type?a("span",[t._v("线下支付")]):t._e(),t._v(" "),a("span",{staticClass:"flex-1 tc"},[t._v("共"+t._s(s.quantity)+"片\n            "),a("em",{staticClass:"clred"},[t._v("\n              ￥"+t._s(s.total_amount/100)+"\n            ")])]),t._v(" "),a("span",{staticClass:"fs22"},[t._v("含优惠￥"+t._s(s.discount_amount?s.discount_amount/100:0))])]),t._v(" "),0!=s.status?a("div",{staticClass:"flex flex-justify-space"},[a("p",{staticClass:"flex-1"},[a("span",[t._v("\n                已付款\n                "),a("em",{staticClass:"clred ml10"},[t._v(t._s(s.paid_amount/100))])]),t._v(" "),a("span",{staticClass:"ml10"},[t._v("\n                未付款\n                "),a("em",{staticClass:"clred ml10"},[t._v(t._s((s.total_amount/100-s.discount_amount/100-s.paid_amount/100).toFixed(2)))])])]),t._v(" "),0!=s.pay_type?a("router-link",{staticClass:"fs22 clblue ",attrs:{to:{path:"/checkEvidence",query:{orderId:s.id,type:0}}}},[t._v("查看汇款凭证")]):t._e()],1):t._e()]),t._v(" "),a("div",{staticClass:"pt30 pb40 tr pr3"},[1!=s.status&&2!=s.status||0==s.pay_type?t._e():a("router-link",{staticClass:"z-link c6 inlineblock z-ckfp",attrs:{to:{path:"/uploadPayfile",query:{orderId:s.id,count:s.total_amount}}}},[t._v("上传汇款凭证")]),t._v(" "),0!=s.status?a("router-link",{staticClass:"z-link c6 inlineblock mb20",attrs:{to:{path:"/checkBill",query:{orderId:s.id}}}},[t._v("查看发票")]):t._e(),t._v(" "),a("router-link",{staticClass:"z-link c6 inlineblock  z-ckfp",attrs:{to:{path:"/checkUploadFile",query:{contract:s.contract}}}},[t._v("查看合同附件")]),t._v(" "),a("commit-company",{attrs:{item:s,type:t.type}}),t._v(" "),3==s.status&&1==s.wlType?a("router-link",{staticClass:"z-link c6 inlineblock ",attrs:{to:{path:"/checkLogistics",query:{orderId:s.id}}}},[t._v("查看物流")]):t._e(),t._v(" "),1!=s.status&&2!=s.status||0!=s.pay_type?t._e():a("a",{staticClass:"z-bluek inlineblock",attrs:{href:"javascript:;"},on:{click:function(a){t.checkPay(s.id)}}},[t._v("确认付款")]),t._v(" "),0==s.status?a("a",{staticClass:"z-bluek inlineblock",attrs:{href:"javascript:;"},on:{click:function(a){t.cancelOrder(s.id)}}},[t._v("取消")]):t._e(),t._v(" "),6==s.status&&0==s.sfwc?a("router-link",{staticClass:"z-bluek inlineblock",attrs:{to:{path:"/customerAppraise",query:{orderId:s.id}}}},[t._v("评价")]):t._e(),t._v(" "),3===s.status&&0==s.wlType?a("a",{staticClass:"z-bluek inlineblock",attrs:{href:"javascript:;"},on:{click:function(a){t.remindFh(s.id)}}},[t._v("提醒发货")]):t._e()],1)],1)})],2)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading-container"},[a("loading",{attrs:{loadflag:t.loading}})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(d,_,!1,function(t){a("5m6F")},"data-v-0f689940",null);s.default=u.exports}});