webpackJsonp([23],{B6Lp:function(t,e){},"c+FZ":function(t,e,a){"use strict";e.d=function(t){return Object(l.a)({url:c.h+"/shopCarList.do",method:"post",data:i()({token:n.a.state.user.token},t)})},e.c=function(t){return Object(l.a)({url:c.h+"/saveShopCarOrder.do",method:"post",data:i()({token:n.a.state.user.token},t)})},e.a=function(t){return Object(l.a)({url:c.c+"/buyersAppUserCenterAddressList.do",method:"post",data:i()({token:n.a.state.user.token},t)})},e.b=function(t){return Object(l.a)({url:c.h+"/deleteShopCar.do",method:"post",data:i()({token:n.a.state.user.token},t)})};var s=a("Dd8w"),i=a.n(s),l=a("wf1y"),c=a("u/8N"),n=a("IcnI")},jzGn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),l=a("BrIN"),c=a("Xtdt"),n=a("HRYr"),o=a("y/jF"),r=a("qwAB"),d=a("c+FZ"),u=a("JxNM"),h=a("62KO"),f=(l.default,c.default,n.default,o.a,r.a,h.a,{data:function(){return{title:"购物车",pullup:!0,loadflag:!1,scrollY:-1,sellerList:[],totalCount:2,countval:0,params:{pageNum:1,pageSize:u.d},ids:"",check:!1,confirmShow:!1,confirmText:"确定",cancelText:"取消",listArrVal:[]}},components:{Tab:l.default,MHeader:c.default,cartDetail:n.default,Loading:o.a,Scroll:r.a,Confirm:h.a},created:function(){this._shopCarList()},methods:{onConfirm:function(){this._deleteShopCar()},Delete:function(){if(!this.listArrVal||this.listArrVal.length<=0)this.$vux.toast.text("请选择要删除的产品","middle");else{var t=[];this.listArrVal.forEach(function(e,a){e.data.forEach(function(e,a){e.isChecked&&t.push(e.id.toString())})}),t.length<=0?this.$vux.toast.text("请选择要删除的产品","middle"):(this.ids=i()(t),this.confirmShow=!0)}},order:function(){this.$refs.cardetail.$emit("bridge",!0)},checkall:function(){this.$refs.cardetail.$emit("checkalls",this.check)},scroll:function(t){if(this.scrollY=t.y,this.scrollY<-280){if(this.loadflag=!0,this.sellerList.length>=this.totalCount)return void(this.loadflag=!1);this.params.pageSize++,this._shopCarList()}},count:function(t){this.countval=t},listArr:function(t){this.listArrVal=t},_shopCarList:function(){var t=this;Object(d.d)(this.params).then(function(e){if(e.code===u.c){if(t.sellerList=e.data.list,t.sellerList.length<=0)return void t.$vux.toast.text("暂无数据","middle");t.totalCount=e.data.total}else t.$vux.toast.text(e.msg,"middle")}).catch(function(e){t.$vux.toast.text(e,"middle")})},_deleteShopCar:function(){var t=this;Object(d.b)({ids:this.ids}).then(function(e){e.code===u.c?t._shopCarList():t.$vux.toast.text(e.msg,"middle")}).catch(function(e){t.$vux.toast.text(e,"middle")})}}}),v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart"},[a("m-header",{attrs:{title:t.title,deleteflag:!0},on:{event:t.Delete}}),t._v(" "),a("scroll",{ref:"scroll",staticClass:"nominate-content",attrs:{"listen-scroll":t.pullup,data:t.sellerList},on:{scroll:t.scroll}},[a("div",{staticClass:"cart-detail"},[a("keep-alive",{attrs:{exclude:"cart-detail"}},[a("cart-detail",{ref:"cardetail",attrs:{data:t.sellerList},on:{count:t.count,listArr:t.listArr}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loadflag,expression:"loadflag"}],staticClass:"loadmore"},[a("loading")],1),t._v(" "),a("div",{staticClass:"bottomval"})],1)]),t._v(" "),a("div",{staticClass:"z-xd bgf"},[a("div",{staticClass:"flex pl3 "},[a("span",{staticClass:"fs24 flex-1 flex flex-align-center "},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.check,expression:"check"}],staticClass:"newInput",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.check)?t._i(t.check,null)>-1:t.check},on:{change:[function(e){var a=t.check,s=e.target,i=!!s.checked;if(Array.isArray(a)){var l=t._i(a,null);s.checked?l<0&&(t.check=a.concat([null])):l>-1&&(t.check=a.slice(0,l).concat(a.slice(l+1)))}else t.check=i},t.checkall]}}),a("span",{staticClass:"ml20"},[t._v("全选")])]),t._v(" "),a("span",{staticClass:"c3  inlineblock fs28"},[t._v("\n        合计："),a("em",{staticClass:"clred"},[t._v("￥"+t._s(t.countval.toFixed(2)))]),t._v(" "),a("a",{staticClass:"z-blued ml20",on:{click:t.order}},[t._v("下单")])])])]),t._v(" "),a("tab"),t._v(" "),a("confirm",{attrs:{"confirm-text":t.confirmText,"cancel-text":t.cancelText},on:{"on-confirm":t.onConfirm},model:{value:t.confirmShow,callback:function(e){t.confirmShow=e},expression:"confirmShow"}},[a("p",{staticStyle:{"text-align":"center"}},[t._v(t._s("是否删除选中产品?"))])])],1)},staticRenderFns:[]};var m=a("VU/8")(f,v,!1,function(t){a("B6Lp")},"data-v-e6dc87f2",null);e.default=m.exports}});