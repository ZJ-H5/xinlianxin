webpackJsonp([43],{EV1k:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xtdt"),n=a("JxNM"),s=a("y/jF"),l=a("yscp"),r=a("KA92"),o=a("7qP5"),d=(o.a,i.default,s.a,{mixins:[o.a],data:function(){return{typename:[{name:"phone",val:""},{name:"password",val:""}],type:0,title:"登录",val:"",params:{},deal:!1}},created:function(){var t=r.a.getStore("user");t&&(this.typename[0].val=t.phone)&&(this.typename[1].val=t.pwd||""),t.pwd&&(this.deal=!0)},computed:{loading:function(){return this.$store.state.zj.updatedloading}},methods:{login:function(){var t=this;if(this.typename.every(function(t){return Object(l.a)(t.name,t.val)}))this.params={phone:this.typename[0].val,pwd:this.typename[1].val,type:this.type},this.$store.dispatch("loginUserdo",this.params).then(function(e){e.code===n.c?(t.$router.push(t.$store.state.user.redirect),t.websockets()):t.$vux.toast.text(e.msg,"middle")}).catch(function(e){t.$vux.toast.text(e.msg,"middle")});else{var e=this.typename.findIndex(function(t){return t.name===Object(l.d)(t.name,t.val)});this._validator(e)}},inputchange:function(t){this._validator(t)},_validator:function(t){var e=this,a=this.typename[t].name;this.$validator.validate(a).then(function(t){if(t)return!0;var i=e.$validator.errors.first(a);e.$vux.toast.text(i,"middle")})}},components:{MHeader:i.default,Loading:s.a}}),p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide"}},[a("div",{staticClass:"login"},[a("div",{staticClass:"fixedtop"},[a("div",{staticClass:"header clr"},[a("m-header",{attrs:{title:t.title,headerflag:!0}})],1)]),t._v(" "),a("ul",{staticClass:" clr"},[a("li",{staticClass:"pl3 pr3 loginli"},[a("i",{staticClass:"iconfont icon-phone ml20 mr20"}),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|phone",expression:"'required|phone'"},{name:"model",rawName:"v-model",value:t.typename[0].val,expression:"typename[0].val"}],staticClass:"inp",attrs:{type:"text",name:"phone",maxlength:"11",placeholder:"请输入手机号码/用户名"},domProps:{value:t.typename[0].val},on:{blur:function(e){t.inputchange(0)},input:function(e){e.target.composing||t.$set(t.typename[0],"val",e.target.value)}}})]),t._v(" "),a("li",{staticClass:"pl3 pr3 loginli"},[a("i",{staticClass:"iconfont icon-mima ml20 mr20"}),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|password",expression:"'required|password'"},{name:"model",rawName:"v-model",value:t.typename[1].val,expression:"typename[1].val"}],staticClass:"inp",attrs:{type:"password",name:"password",placeholder:"请输入密码"},domProps:{value:t.typename[1].val},on:{blur:function(e){t.inputchange(1)},input:function(e){e.target.composing||t.$set(t.typename[1],"val",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"lgbtn pl3 pr3"},[a("a",{staticClass:"lgbtna tc",on:{click:t.login}},[t._v(t._s(t.title))])]),t._v(" "),a("div",{staticClass:"lgbt pl3 pr3"},[a("router-link",{staticClass:"lgbt-link",attrs:{to:"/phoneLogin"}},[t._v("手机验证登录")]),t._v(" "),a("router-link",{staticClass:"lgbt-link lgbtm",attrs:{to:"/register"}},[t._v("用户注册")]),t._v(" "),a("router-link",{staticClass:"lgbt-link",attrs:{to:"/forgetPassw"}},[t._v("忘记密码")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading-container"},[a("loading",{attrs:{loadflag:t.loading}})],1)])])},staticRenderFns:[]};var c=a("VU/8")(d,p,!1,function(t){a("cpGO")},null,null);e.default=c.exports},cpGO:function(t,e){}});