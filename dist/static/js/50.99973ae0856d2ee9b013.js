webpackJsonp([50],{QtJz:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("ruAw"),s=e("62KO"),a=e("u/8N"),o=e("bVEx"),c=(s.a,{data:function(){return{orderId:this.$route.query.orderId,money:"",filelist:[],confirmShow:!1,confirmText:"保存",cancelText:"不保存",amount:this.$route.query.count}},components:{Confirm:s.a},methods:{goback:function(){0!=this.filelist.length||""!=this.money?this.confirmShow=!0:this.$router.back()},onConfirm:function(){if(console.log(111),""!=this.money)return parseInt(100*this.money)>parseInt(this.amount)?(this.$vux.toast.text("汇款金额大于总金额","middle"),void(this.money="")):void(0!=this.filelist.length?this._addPaymentVoucherdo():this.$vux.toast.text("未上传付款凭证","middle"));this.$vux.toast.text("未输入付款金额","middle")},onCancel:function(){this.$router.back(),this.filelist=[],this.money=""},getFile:function(t){var i=this,e=Object(o.a)(t);this.$http.post(a.b,e).then(function(t){for(var e=t.data.data.split(","),n=0;n<e.length;n++)i.filelist.push(e[n])},function(){})},addPayFile:function(){this.onConfirm()},deleteImg:function(t){this.filelist.splice(t,1)},_addPaymentVoucherdo:function(){var t=this;Object(n.h)({orderId:this.orderId,filesPath:this.filelist.toString(),money:this.money}).then(function(i){1==i.code&&(t.$vux.toast.text(i.msg,"middle"),t.$router.back())}).catch(function(t){})}},watch:{money:function(){this.money=this.money.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")}}}),l={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"uploadFile"},[e("div",{staticClass:"head"},[e("div",{staticClass:"detail-head pl3 tc pr3 relative clr"},[e("a",{staticClass:"iconfont icon-back1 fs48 left cfff",attrs:{href:"javascript:;"},on:{click:t.goback}}),t._v(" "),e("span",{staticClass:"fs36 cfff"},[t._v("上传付款凭证")]),t._v(" "),e("a",{staticClass:"add right f30 cfff",attrs:{href:"javascript:;"},on:{click:t.addPayFile}},[t._v("提交")])])]),t._v(" "),e("div",{staticClass:"uploadbx"},[e("div",{staticClass:"pb30 pt30 pl3 pr3 bgf c0"},[e("span",{staticClass:"fs30"},[t._v("\n        付款金额：\n      ")]),t._v(" "),e("span",{staticClass:"fs26 uploadlisa"},[e("em",{staticClass:"ml10 mr20"},[t._v("¥")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.money,expression:"money"}],attrs:{placeholder:"输入金额"},domProps:{value:t.money},on:{input:function(i){i.target.composing||(t.money=i.target.value)}}})])]),t._v(" "),e("ul",{staticClass:"uploadul clr"},[t._l(t.filelist,function(i,n){return e("li",{staticClass:"uploadli"},[e("span",[e("img",{attrs:{src:i}})]),t._v(" "),e("i",{staticClass:"close",on:{click:function(i){t.deleteImg(n)}}})])}),t._v(" "),e("li",{staticClass:"uploadli"},[e("div",{staticClass:"addbtn"},[e("span",{staticClass:"addbtnbg"}),t._v(" "),e("input",{staticClass:"addbtnipn",attrs:{type:"file",multiple:"multiple"},on:{change:function(i){t.getFile(i)}}})])])],2)]),t._v(" "),e("confirm",{attrs:{"confirm-text":t.confirmText,"cancel-text":t.cancelText},on:{"on-cancel":t.onCancel,"on-confirm":t.onConfirm},model:{value:t.confirmShow,callback:function(i){t.confirmShow=i},expression:"confirmShow"}},[e("p",{staticStyle:{"text-align":"center"}},[t._v(t._s("是否保存本次编辑结果?"))])])],1)},staticRenderFns:[]};var r=e("VU/8")(c,l,!1,function(t){e("f3jc")},null,null);i.default=r.exports},f3jc:function(t,i){}});