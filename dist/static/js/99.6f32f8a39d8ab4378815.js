webpackJsonp([99],{WC4p:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("pXPG"),i=a("HD9R"),n=a("aTeQ"),o=a("rHil"),r=a("cHu4"),l=a("rLAy"),c=a("62KO"),d=a("ruAw"),h=(s.default,i.a,n.a,o.a,r.a,l.a,c.a,/^((13|14|15|17|18)[0-9]{1}\d{8})$/),u={components:{addressMsg:s.default,Popup:i.a,XSwitch:n.a,Group:o.a,XAddress:r.a,Toast:l.a,Confirm:c.a},data:function(){return{title:"",value:0,arr:[],dz:"",shname:"",shtel:"",addressData:[],showAddress:!1,list:"",confirmShow:!1,confirmText:"保存",cancelText:"不保存",addresslist:[],flag:!0}},created:function(){this.getCity()},methods:{turn:function(){console.log(this.value)},goback:function(){""!==this.shname&&""!==this.shtel&&this.arr!==[]&&""!==this.dz&&h.test(this.shtel)?this.saveaddress():this.confirmShow=!0},onCancel:function(){this.$router.back()},onConfirm:function(){return""===this.shname?(this.$vux.toast.text("收货人不能为空","middle"),!1):""===this.shtel?(this.$vux.toast.text("联系方式不能为空","middle"),!1):h.test(this.shtel)?(console.log(this.arr),0===this.arr.length?(this.$vux.toast.text("收货地址不能为空","middle"),!1):""===this.dz?(this.$vux.toast.text("收货详细地址不能为空","middle"),!1):void this._buyersAppCenterAddressSavedo()):(this.$vux.toast.text("手机格式不正确","middle"),!1)},logHide:function(t,e){if(this.flag)return this.flag=!1,void console.log(this.arr);for(var a=0;a<t.length;a++)this.arr[a]={id:t[a],name:e[a]};console.log(this.arr)},saveaddress:function(){this.onConfirm()},_buyersAppCenterAddressSavedo:function(){var t=this;Object(d.p)({provinceId:this.arr[0].id,provinceName:this.arr[0].name,cityId:this.arr[1].id,cityName:this.arr[1].name,regionId:this.arr[2].id,regionName:this.arr[2].name,address:this.dz,contactName:this.shname,contactMobile:this.shtel,defaultStatus:this.value,type:1}).then(function(e){1===e.code&&(t.$vux.toast.text(e.msg,"middle"),t.$router.back())}).catch(function(t){})},addressDialog:function(){this.$router.push("/manageAddress"),this._address()},getCity:function(){var t=this,e=this;Object(d.F)({}).then(function(a){if(1==a.code){var s=[],i=[],n=[];a.data.forEach(function(t,a){e.$set(s,a,{name:t.name.toString(),value:t.id.toString()})}),a.data1.forEach(function(t,a){e.$set(i,a,{name:t.name.toString(),value:t.id.toString(),parent:t.parentid.toString()})}),a.data2.forEach(function(t,a){e.$set(n,a,{name:t.name.toString(),value:t.id.toString(),parent:t.parentid.toString()})}),t.addressData=s.concat(i).concat(n)}}).catch(function(t){})},_address:function(){var t=this;Object(d.x)({}).then(function(e){1==e.code&&(t.list=e.data.list,t.userId=t.list[0].userId,console.log(t.list))}).catch(function(t){})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addressAdd"},[a("div",{staticClass:"fixedtop"},[a("div",{staticClass:"header"},[a("a",{staticClass:"iconfont icon-back1 fs48 left cfff",attrs:{href:"javascript:;"},on:{click:t.goback}}),t._v(" "),a("span",{staticClass:"txt"},[t._v("添加地址")]),t._v(" "),a("a",{staticClass:"add",on:{click:t.saveaddress}},[t._v("保存")])])]),t._v(" "),a("div",{staticClass:"addrmsg"},[a("ul",{staticClass:"fptxt clr"},[a("li",{staticClass:"flex"},[a("span",{staticClass:"fptxtl"},[t._v("收货人")]),t._v(" "),a("span",{staticClass:"fptxtr flex-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.shname,expression:"shname"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.shname},on:{input:function(e){e.target.composing||(t.shname=e.target.value)}}})])]),t._v(" "),a("li",{staticClass:"flex"},[a("span",{staticClass:"fptxtl"},[t._v("联系方式")]),t._v(" "),a("span",{staticClass:"fptxtr flex-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.shtel,expression:"shtel"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.shtel},on:{input:function(e){e.target.composing||(t.shtel=e.target.value)}}})])]),t._v(" "),a("li",{staticClass:"flex flex-align-center"},[a("span",{staticClass:"fptxtl"},[t._v("收货地址")]),t._v(" "),a("group",{staticClass:"flex-1 tr addrbx"},[a("x-address",{attrs:{title:t.title,list:t.addressData,value:t.addresslist,placeholder:"请选择"},on:{"on-shadow-change":t.logHide}})],1)],1),t._v(" "),a("li",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dz,expression:"dz"}],staticClass:"txtbx",attrs:{placeholder:"请填写详细地址",maxlength:"30"},domProps:{value:t.dz},on:{input:function(e){e.target.composing||(t.dz=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"mt40"},[a("group",[a("x-switch",{attrs:{title:"设为默认","value-map":[0,1]},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1),t._v(" "),a("confirm",{attrs:{"confirm-text":t.confirmText,"cancel-text":t.cancelText},on:{"on-cancel":t.onCancel,"on-confirm":t.onConfirm},model:{value:t.confirmShow,callback:function(e){t.confirmShow=e},expression:"confirmShow"}},[a("p",{staticStyle:{"text-align":"center"}},[t._v(t._s("是否保存本次编辑结果?"))])])],1)},staticRenderFns:[]};var v=a("VU/8")(u,f,!1,function(t){a("tlsF")},null,null);e.default=v.exports},tlsF:function(t,e){}});